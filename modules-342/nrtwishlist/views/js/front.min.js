$(document).ready(function(){function i(s,i){var t={process:"login",ajax:1,current_url:prestashop.urls.current_url};$.post(opWishList.login,t,null,"json").then(function(t){$("#wishlist_login").html(t.html),$("#modal_wishlist").modal("show"),void 0!==s&&void 0!==i&&$(".js-wishlist-btn-"+s+"-"+i).removeClass("loading")}).fail(function(t){prestashop.emit("handleError",{eventType:"wishlistShowLogin",resp:t})})}function e(){$(".js-wishlist").each(function(){var t=$(this),s=0;t.closest(".js-product-miniature").length?s=t.closest(".js-product-miniature").data("id-product"):$("#product_page_product_id").length&&(s=$("#product_page_product_id").val()),t.attr("data-id-product",s),t.attr("data-id-product-attribute",0),opWishList.ids.includes(s+"-0")?(t.removeClass("js-wishlist-add").addClass("added"),t.text(opWishList.alert.view),void 0!==$(this).attr("data-original-title")&&!1!==$(this).attr("data-original-title")?t.attr("data-original-title",opWishList.alert.view):t.attr("title",opWishList.alert.view)):(t.addClass("js-wishlist-add").removeClass("added"),t.text(opWishList.alert.add),void 0!==$(this).attr("data-original-title")&&!1!==$(this).attr("data-original-title")?t.attr("data-original-title",opWishList.alert.add):t.attr("title",opWishList.alert.add)),t.addClass("js-wishlist-btn-"+s+"-0")}),$(".js-wishlist-nb").text(opWishList.ids.length)}e(),$("body").on("show.bs.modal",".quickview",function(){e()}),prestashop.on("updatedProductList",function(t){e()}),prestashop.on("updatedProduct",function(t){e()}),prestashop.on("updatedProductAjax",function(t){e()}),$("body").on("click",".js-wishlist-add",function(t){prestashop.emit("clickWishListAdd",{dataset:this.dataset,self:this}),t.preventDefault()}),$("body").on("click",".js-wishlist-remove",function(t){prestashop.emit("clickWishListRemove",{dataset:this.dataset}),t.preventDefault()}),$("body").on("click",".js-wishlist-remove-all",function(t){prestashop.emit("clickWishListRemoveAll",{dataset:this.dataset}),t.preventDefault()}),prestashop.on("clickWishListAdd",function(s){var t;$(".js-wishlist-btn-"+s.dataset.idProduct+"-"+s.dataset.idProductAttribute).hasClass("loading")||(t={process:"add",ajax:1,idProduct:s.dataset.idProduct,idProductAttribute:s.dataset.idProductAttribute},$(".js-wishlist-btn-"+s.dataset.idProduct+"-"+s.dataset.idProductAttribute).addClass("loading"),$.post(opWishList.actions,t,null,"json").then(function(t){t.is_logged?(opWishList.enabled_notices&&t.notices&&($(t.notices).find(".ax-n-success").length?toastr.success(t.notices):$(t.notices).find(".ax-n-info").length?toastr.info(t.notices):toastr.error(t.notices)),opWishList.ids=t.productsIds,$(".js-wishlist-btn-"+s.dataset.idProduct+"-"+s.dataset.idProductAttribute).removeClass("loading"),e()):i(s.dataset.idProduct,s.dataset.idProductAttribute)}).fail(function(t){prestashop.emit("handleError",{eventType:"clickWishListAdd",resp:t})}))}),prestashop.on("clickWishListRemove",function(s){var t;$(".js-wishlist-remove-"+s.dataset.idProduct+"-"+s.dataset.idProductAttribute).hasClass("loading")||(t={process:"remove",ajax:1,idProduct:s.dataset.idProduct,idProductAttribute:s.dataset.idProductAttribute},$(".js-wishlist-remove-"+s.dataset.idProduct+"-"+s.dataset.idProductAttribute).addClass("loading"),$.post(opWishList.actions,t,null,"json").then(function(t){t.is_logged?($(".js-wishlist-"+s.dataset.idProduct+"-"+s.dataset.idProductAttribute).remove(),opWishList.ids=t.productsIds,e(),0==opWishList.ids.length&&($("#js-wishlist-table").remove(),$("#js-wishlist-warning").show())):i(s.dataset.idProduct,s.dataset.idProductAttribute)}).fail(function(t){prestashop.emit("handleError",{eventType:"clickWishListRemove",resp:t})}))}),prestashop.on("clickWishListRemoveAll",function(t){$(".js-wishlist-remove-all").hasClass("loading")||($(".js-wishlist-remove-all").addClass("loading"),$.post(opWishList.actions,{process:"removeAll",ajax:1},null,"json").then(function(t){t.is_logged?(opWishList.ids=t.productsIds,e(),$("#js-wishlist-table").remove(),$("#js-wishlist-warning").show()):i(null,null)}).fail(function(t){prestashop.emit("handleError",{eventType:"clickWishListRemoveAll",resp:t})}))}),$("#wishlist-clipboard-btn").on("click",function(){var t=$(this);t.closest(".input-group").find("input.js-to-clipboard").select(),document.execCommand("copy")&&(t.text(t.data("textCopied")),setTimeout(function(){t.text(t.data("textCopy"))},1500))})});